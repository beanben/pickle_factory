<app-asset-class-modal *ngIf="openAssetClassModal" [mode]="modalMode" [scheme]="scheme" [assetClass]="assetClassSelected"
  [availableAssetClassUses]="availableAssetClassUses" (modalSaveAssetClass)="onSave($event)" (deleteIsConfirmed)="onDeleteAssetClass()">
</app-asset-class-modal>

<app-strategy-modal *ngIf="openStrategyModal" [assetClass]="assetClassSelected" [mode]="modalMode"
  (modalAssetClassUpdate)="onUpdateInvestmentStrategy()">
</app-strategy-modal>

<app-unit-schedule-modal *ngIf="openUnitScheduleModal" [assetClass]="assetClassSelected" [scheme]="scheme" (modalSaveUnitSchedule)="onEditUnitSchedule($event)"></app-unit-schedule-modal>

<ng-container *ngIf="scheme.assetClasses.length > 0; else noAssetClass">
  <div class="p-4">
    <div class="row py-2 justify-content-start" *ngFor="let assetClass of scheme.assetClasses; let i = index ">
      <div class="col-6">
        <app-unit-card [assetClass]="assetClass" [scheme]="scheme">
        </app-unit-card>
      </div>
    </div>

    <div class="btn btn-primary" [attr.disabled]="scheme.assetClasses.length === 0" (click)="isShow = !isShow">
      <ng-container [ngSwitch]="scheme.assetClasses.length">
        <span *ngSwitchCase="1">{{isShow ? 'Hide schedule' : 'Show schedule'}}</span>
        <span *ngSwitchDefault>{{isShow ? 'Hide schedules' : 'Show schedules'}}</span>
      </ng-container>
    </div>
  </div>

  <ng-container *ngIf="isShow">
    <hr>

    <h5 class="p-2"> Unit schedules</h5>

    <ul class="nav nav-tabs pt-2">
      <li class="nav-item px-2" *ngFor="let assetClass of scheme.assetClasses; let i=index">
        <p class="nav-link" (click)="onSelectAssetClass(i)"
          [ngClass]="{'active': tabActive === assetClass.use.toLowerCase()}">{{assetClass.use | titlecase}}</p>
      </li>
      <li class="ms-auto px-2">
        <button class="btn btn-primary" (click)="onOpenAssetClassModal('add')"
          [disabled]="availableAssetClassUses.length === 0">
          Add asset class
        </button>
      </li>
    </ul>

    <div class="row m-0">
      <div class="col">

        <div class="row p-2 my-4">
          <div class="col">
            <app-unit-schedule [assetClass]="assetClassSelected" [scheme]="scheme"></app-unit-schedule>
          </div>
        </div>
        <div class=" my-2 d-flex justify-content-end">
          <button type="button" class="btn btn-primary mx-2" (click)="onOpenAssetClassModal('edit')">Edit asset class</button>
          <button type="button" class="btn btn-primary mx-2">Add multiple units</button>
          <button type="button" class="btn btn-primary mx-2" (click)="onOpenUnitScheduleModal('edit')">Edit unit schedule</button>
        </div>

      </div>
    </div>
  </ng-container>


</ng-container>
<ng-template #noAssetClass>
  <div class="d-flex flex-row justify-content-center pt-4" style="position: relative; top:20px">
    <div class="title p-2">Add an asset class</div>
    <button class="btn btn-primary" (click)="onOpenAssetClassModal('add')">Add asset class</button>
  </div>
</ng-template>
