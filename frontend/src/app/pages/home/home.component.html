<ng-container *ngIf="!_authService.isLoggedIn()">
    <app-landing></app-landing>
</ng-container>

<ng-container *ngIf="_authService.isLoggedIn()">
    <app-loan-modal 
        *ngIf="openLoanModal" 
        (modalSaveLoan)="onSave($event)">
    </app-loan-modal>



    <!-- <div class="container-fluid">
        <div class="row">
            <div class="col p-4">
                <h2 class="pb-2" *ngIf="!!user.firm">{{user.firm.name}}</h2>
                <button type="button" class="btn btn-primary" (click)="openLoanModal=true">
                    Add a new loan
                </button>
            </div>
        </div>
    </div> -->

    <div class="container">

        <div class="row">
            <div class="col p-4">
                <h2 class="pb-2" *ngIf="!!user.firm">{{user.firm.name}}</h2>
            </div>
        </div>

        <div class="row m-2">
            <div class="col bg-white rounded" style="min-height: 650px">

                <div class="row">
                    <div class="col m-2 py-2">

                        <ng-container *ngIf="loans.length !== 0 ; else noLoans">
                            <div class="row">
                                <div class="col d-flex justify-content-end m-2">
                                    <button type="button" class="btn btn-primary p-1" (click)="openLoanModal=true">
                                        New loan
                                    </button>
                                </div>
                            </div>

                            <div class="row py-2 tableTitle">
                                <div class="col">Loan</div>
                                <div class="col">Borrower</div>
                            </div>
        
                            <div class="row py-2 rowTable highlight" *ngFor="let loan of loans; let i = index" (click)="onLoanSelected(i)">
                                <div class="col my-auto">{{loan.name}}</div>
                                <div class="col my-auto">
                                    {{loan.borrower? loan.borrower.name: "no borrower"}}
                                </div>
                            </div>      
                        </ng-container>
        
                        <ng-template #noLoans>
                            <div class="d-flex justify-content-center" style="margin-top: 100px">
                                <button type="button" class="btn btn-primary px-auto" (click)="openLoanModal=true">
                                    Add a new loan
                                </button>
                            </div>
                        </ng-template>

                    </div>
                </div>

            </div>
        </div>
    </div>






</ng-container>

